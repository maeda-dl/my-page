<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>社員紹介＋円形ルーレットおみくじ</title>
<style>
  html, body {
    margin: 0; padding: 0; min-height: 100%;
    font-family: sans-serif;
    background: linear-gradient(120deg, #f0f8ff, #e6f7ff);
    transition: background 1s ease;
    overflow: hidden;
  }

  #particles { position: fixed; top:0; left:0; width:100%; height:100%; z-index:1; }

  .container {
    position: relative; display:flex; flex-direction:column;
    align-items:center; justify-content:flex-start;
    min-height:100vh; padding:2em 1em; z-index:2;
  }

  .message, #name { opacity:0; margin:0.5em 0; font-weight:bold; transition:opacity 1s ease; text-align:center; }
  #msg1 { font-size:clamp(20px,5vw,40px); }
  #dataLine { font-size:clamp(22px,6vw,45px); }
  #name { font-size:clamp(22px,6vw,40px); }

  .image-wrapper { margin-top:1em; position:relative; width:90%; max-width:400px; }
  .image { display:block; width:100%; height:auto; position:absolute; top:0; left:0; opacity:0; transition:opacity 1s ease; box-shadow:0 0 20px rgba(0,0,0,0.2); border-radius:10px; }

  /* おみくじボタン */
  #omikujiBtn {
    position: fixed;
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
    padding: 15px 30px;
    font-size:22px;
    font-weight:bold;
    border:none;
    border-radius:50px;
    background:#ff6b6b;
    color:#fff;
    cursor:pointer;
    z-index:5;
    animation: float 3s ease-in-out infinite;
  }
  @keyframes float { 0%,100%{transform:translate(-50%,0)} 50%{transform:translate(-50%,-10px)} }

  /* ルーレット円形 */
  #roulette {
    position: absolute;
    width: 400px; height: 400px;
    top:50%; left:50%;
    transform:translate(-50%,-50%);
    pointer-events:none;
    z-index:4;
  }
  .fortune {
    position: absolute;
    left:50%; top:50%;
    transform-origin:0 -150px; /* 半径150pxで円 */
    font-size:24px;
    font-weight:bold;
  }

  /* 結果表示 */
  #resultDisplay {
    position: fixed;
    top:50%; left:50%;
    transform:translate(-50%,-50%);
    font-size:50px; font-weight:bold;
    color:#ff0000;
    display:none;
    animation: blink 0.5s step-start infinite;
    z-index:9999;
  }
  @keyframes blink { 50% { opacity:0; } }
</style>
</head>
<body>
<canvas id="particles"></canvas>

<div class="container">
  <div id="msg1" class="message">はじめまして</div>
  <div id="dataLine" class="message">Data Line</div>
  <div id="name">前田だよ</div>

  <div class="image-wrapper">
    <img id="imgA" class="image" src="A.png" alt="画像A" />
    <img id="imgB" class="image" src="B.png" alt="画像B" />
  </div>

  <!-- ルーレット -->
  <div id="roulette"></div>
  <!-- おみくじボタン -->
  <button id="omikujiBtn">おみくじを引く 🎲</button>
</div>

<!-- 結果表示 -->
<div id="resultDisplay"></div>

<script>
// 粒子アニメーション（省略、既存コード利用可）
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
const particleChars="MAEDA";
let particles=[];
for(let i=0;i<100;i++){particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+1,dx:(Math.random()-0.5)*1.2,dy:(Math.random()-0.5)*1.2,char:particleChars[Math.floor(Math.random()*particleChars.length)]});}
function drawParticles(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle="rgba(80,80,80,0.8)";particles.forEach(p=>{ctx.font=`${p.r*6}px sans-serif`;ctx.fillText(p.char,p.x,p.y);p.x+=p.dx;p.y+=p.dy;if(p.x<0||p.x>canvas.width)p.dx*=-1;if(p.y<0||p.y>canvas.height)p.dy*=-1});requestAnimationFrame(drawParticles);}
drawParticles();
window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

// フェードイン
function fadeIn(el,delay){setTimeout(()=>{el.style.opacity=1;},delay);}
fadeIn(document.getElementById("msg1"),500);
fadeIn(document.getElementById("dataLine"),2000);
fadeIn(document.getElementById("imgA"),5000);
setTimeout(()=>{document.getElementById("imgA").style.opacity=0;document.getElementById("imgB").style.opacity=1;document.getElementById("name").style.opacity=1;},8000);

// おみくじ
const fortunes=["大吉 🎉","中吉 😀","小吉 🙂","吉 😊","末吉 😌","凶 😱","大凶 💀"];
const btn=document.getElementById("omikujiBtn");
const roulette=document.getElementById("roulette");
const resultDisplay=document.getElementById("resultDisplay");

btn.addEventListener("click",()=>{
  btn.disabled=true;
  roulette.innerHTML="";
  const centerX=200, centerY=200, radius=150;
  const total=fortunes.length;
  // 円形に配置
  fortunes.forEach((f,i)=>{
    const div=document.createElement("div");
    div.className="fortune";
    div.textContent=f;
    div.style.transform=`rotate(${(360/total)*i}deg) translate(${radius}px) rotate(${- (360/total)*i}deg)`;
    roulette.appendChild(div);
  });
  roulette.style.display="block";

  // 回転アニメーション
  let angle=0;
  const selected=fortunes[Math.floor(Math.random()*fortunes.length)];
  const targetIndex=fortunes.indexOf(selected);
  const spins=3; // 3周
  const finalAngle=(360/total)*targetIndex;
  const duration=3000;
  const start=performance.now();

  function animate(time){
    const t=(time-start)/duration;
    if(t>=1){
      roulette.style.transform=`rotate(${spins*360 + finalAngle}deg)`;
      showResult(selected);
      return;
    }
    const currentAngle=(spins*360 + finalAngle)*t;
    roulette.style.transform=`rotate(${currentAngle}deg)`;
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
});

function showResult(text){
  roulette.style.display="none";
  resultDisplay.textContent=text;
  resultDisplay.style.display="block";
  setTimeout(()=>{
    resultDisplay.style.display="none";
    btn.disabled=false;
  },3000);
}
</script>
</body>
</html>
